<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="From Ankita üå∏" />
    <meta name="theme-color" content="#f7efe4" />
    <title>From Ankita üå∏</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,500;1,300;1,500&family=Nunito:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --parchment: #f7efe4;
        --linen: #ede0cc;
        --biscuit: #dcc9ad;
        --cinnamon: #c4874f;
        --terracotta: #b5633a;
        --bark: #7a4423;
        --ink: #3d2010;
        --ink-light: #9c7455;
        --white: #fffcf7;
        --cream-card: #fdf7ef;
        --shadow: rgba(61, 32, 16, 0.1);
      }

      *,
      *::before,
      *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }
      html {
        height: -webkit-fill-available;
      }

      body {
        font-family: 'Nunito', sans-serif;
        background: var(--parchment);
        color: var(--ink);
        min-height: 100vh;
        min-height: -webkit-fill-available;
        overflow-x: hidden;
      }

      /* Paper grain */
      body::after {
        content: '';
        position: fixed;
        inset: 0;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 9999;
        opacity: 0.5;
      }

      body::before {
        content: '';
        position: fixed;
        inset: 0;
        background:
          radial-gradient(
            ellipse 70% 50% at 15% 10%,
            rgba(196, 135, 79, 0.18) 0%,
            transparent 60%
          ),
          radial-gradient(
            ellipse 60% 60% at 85% 85%,
            rgba(181, 99, 58, 0.12) 0%,
            transparent 55%
          );
        z-index: 0;
      }

      /* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
      .app {
        position: relative;
        z-index: 1;
        max-width: 430px;
        margin: 0 auto;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        padding-top: env(safe-area-inset-top, 16px);
        padding-bottom: calc(76px + env(safe-area-inset-bottom, 0px));
      }

      /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
      .header {
        padding: 24px 28px 14px;
      }

      .time-greeting {
        font-size: 10px;
        font-weight: 700;
        letter-spacing: 2.5px;
        text-transform: uppercase;
        color: var(--cinnamon);
        margin-bottom: 4px;
      }

      .header-name {
        font-family: 'Cormorant Garamond', serif;
        font-size: 30px;
        font-weight: 300;
        color: var(--ink);
        line-height: 1.1;
      }

      .header-name em {
        font-style: italic;
        color: var(--terracotta);
      }

      .header-rule {
        height: 1px;
        margin-top: 14px;
        background: linear-gradient(to right, var(--biscuit), transparent);
      }

      /* ‚îÄ‚îÄ BOTTOM NAV ‚îÄ‚îÄ */
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 430px;
        padding: 10px 20px calc(10px + env(safe-area-inset-bottom, 0px));
        background: rgba(247, 239, 228, 0.94);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border-top: 1px solid var(--linen);
        display: flex;
        justify-content: space-around;
        z-index: 100;
      }

      .nav-btn {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 3px;
        background: none;
        border: none;
        cursor: pointer;
        padding: 6px 4px;
        border-radius: 14px;
        transition: background 0.2s;
      }

      .nav-btn:active {
        background: var(--linen);
      }
      .nav-icon {
        font-size: 20px;
        transition: transform 0.2s;
      }
      .nav-label {
        font-size: 9px;
        font-weight: 600;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: var(--ink-light);
        transition: color 0.2s;
      }

      .nav-btn.active .nav-icon {
        transform: scale(1.15);
      }
      .nav-btn.active .nav-label {
        color: var(--terracotta);
        font-weight: 700;
      }

      /* ‚îÄ‚îÄ SCREENS ‚îÄ‚îÄ */
      .screen {
        display: none;
        flex: 1;
        padding: 8px 20px 24px;
        flex-direction: column;
        gap: 18px;
      }
      .screen.active {
        display: flex;
        animation: screenIn 0.35s cubic-bezier(0.22, 1, 0.36, 1);
      }

      @keyframes screenIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
      .card {
        background: var(--cream-card);
        border-radius: 22px;
        box-shadow:
          0 2px 0 var(--linen),
          0 6px 24px var(--shadow);
      }

      .card-inner {
        padding: 24px;
      }
      .card-tag {
        font-size: 9px;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: var(--cinnamon);
        margin-bottom: 10px;
        display: block;
      }

      /* ‚îÄ‚îÄ HOME: AFFIRMATION ‚îÄ‚îÄ */
      .affirmation-card {
        position: relative;
        overflow: hidden;
      }

      .affirmation-deco {
        position: absolute;
        top: -12px;
        right: 16px;
        font-family: 'Cormorant Garamond', serif;
        font-size: 130px;
        color: var(--linen);
        line-height: 1;
        pointer-events: none;
        user-select: none;
      }

      .affirmation-text {
        font-family: 'Cormorant Garamond', serif;
        font-size: 22px;
        font-style: italic;
        font-weight: 300;
        line-height: 1.6;
        color: var(--ink);
        position: relative;
        z-index: 1;
      }

      .affirmation-from {
        margin-top: 14px;
        font-size: 12px;
        color: var(--cinnamon);
        font-style: italic;
      }

      /* ‚îÄ‚îÄ HOME: MOOD ‚îÄ‚îÄ */
      .mood-section-title {
        font-size: 10px;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: var(--ink-light);
        margin-bottom: 12px;
      }

      .mood-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 9px;
      }

      .mood-tile {
        background: var(--cream-card);
        border: 1.5px solid var(--linen);
        border-radius: 18px;
        padding: 14px 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 2px 0 var(--linen);
      }

      .mood-tile:active {
        transform: scale(0.95);
      }

      .mood-tile.selected {
        border-color: var(--terracotta);
        background: rgba(181, 99, 58, 0.07);
        box-shadow: 0 0 0 3px rgba(181, 99, 58, 0.12);
        transform: scale(1.04);
      }

      .mood-emoji {
        font-size: 26px;
      }
      .mood-word {
        font-size: 10px;
        font-weight: 700;
        letter-spacing: 0.5px;
        color: var(--ink-light);
        text-align: center;
      }

      .mood-tile.selected .mood-word {
        color: var(--terracotta);
      }

      /* ‚îÄ‚îÄ MOOD RESPONSE ‚îÄ‚îÄ */
      .mood-response {
        display: none;
        animation: moodReveal 0.45s cubic-bezier(0.22, 1, 0.36, 1);
      }

      .mood-response.show {
        display: block;
      }

      @keyframes moodReveal {
        from {
          opacity: 0;
          transform: translateY(14px) scale(0.97);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Photo response */
      .photo-response {
        border-radius: 22px;
        overflow: hidden;
        box-shadow:
          0 2px 0 var(--linen),
          0 8px 32px var(--shadow);
      }

      .photo-response-img {
        width: 100%;
        aspect-ratio: 4/3;
        background: linear-gradient(135deg, var(--linen), var(--biscuit));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 80px;
        overflow: hidden;
      }

      .photo-response-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .photo-response-body {
        background: var(--cream-card);
        padding: 20px 22px 22px;
      }

      .photo-response-caption {
        font-family: 'Cormorant Garamond', serif;
        font-size: 19px;
        font-style: italic;
        font-weight: 300;
        color: var(--ink);
        line-height: 1.6;
      }

      .photo-response-from {
        margin-top: 10px;
        font-size: 11px;
        color: var(--cinnamon);
      }

      /* Audio response */
      .audio-response {
        background: var(--cream-card);
        border-radius: 22px;
        box-shadow:
          0 2px 0 var(--linen),
          0 8px 32px var(--shadow);
        overflow: hidden;
      }

      .audio-header {
        padding: 22px 22px 16px;
      }

      .audio-response-label {
        font-size: 9px;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: var(--cinnamon);
        margin-bottom: 8px;
      }

      .audio-response-title {
        font-family: 'Cormorant Garamond', serif;
        font-size: 20px;
        font-style: italic;
        font-weight: 300;
        color: var(--ink);
        line-height: 1.45;
      }

      .audio-player-bar {
        background: var(--linen);
        padding: 16px 22px 20px;
        display: flex;
        align-items: center;
        gap: 14px;
      }

      .audio-play-btn {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--cinnamon), var(--terracotta));
        border: none;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 15px;
        cursor: pointer;
        flex-shrink: 0;
        box-shadow: 0 4px 14px rgba(181, 99, 58, 0.4);
        transition: transform 0.15s;
      }

      .audio-play-btn:active {
        transform: scale(0.9);
      }

      .waveform {
        display: flex;
        align-items: center;
        gap: 2.5px;
        height: 32px;
        flex: 1;
      }

      .wbar {
        width: 3px;
        background: var(--biscuit);
        border-radius: 2px;
        transition: background 0.3s;
      }

      .audio-response.playing .wbar {
        background: var(--cinnamon);
        animation: waveAnim 0.8s ease-in-out infinite alternate;
      }

      .audio-response.playing .wbar:nth-child(1) {
        animation-delay: 0s;
      }
      .audio-response.playing .wbar:nth-child(2) {
        animation-delay: 0.1s;
      }
      .audio-response.playing .wbar:nth-child(3) {
        animation-delay: 0.2s;
      }
      .audio-response.playing .wbar:nth-child(4) {
        animation-delay: 0.3s;
      }
      .audio-response.playing .wbar:nth-child(5) {
        animation-delay: 0.15s;
      }
      .audio-response.playing .wbar:nth-child(6) {
        animation-delay: 0.05s;
      }
      .audio-response.playing .wbar:nth-child(7) {
        animation-delay: 0.25s;
      }
      .audio-response.playing .wbar:nth-child(8) {
        animation-delay: 0.35s;
      }

      @keyframes waveAnim {
        from {
          height: 4px;
        }
        to {
          height: 26px;
        }
      }

      .audio-duration {
        font-size: 11px;
        color: var(--ink-light);
        flex-shrink: 0;
      }

      /* Text/message response */
      .text-response {
        background: linear-gradient(135deg, var(--terracotta), var(--bark));
        border-radius: 22px;
        padding: 24px 24px 26px;
        box-shadow: 0 6px 30px rgba(122, 68, 35, 0.3);
        color: white;
      }

      .text-response-tag {
        font-size: 9px;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        opacity: 0.65;
        margin-bottom: 10px;
      }

      .text-response-emoji {
        font-size: 32px;
        margin-bottom: 10px;
        display: block;
      }

      .text-response-msg {
        font-family: 'Cormorant Garamond', serif;
        font-size: 20px;
        font-style: italic;
        font-weight: 300;
        line-height: 1.6;
        opacity: 0.95;
      }

      .text-response-from {
        margin-top: 12px;
        font-size: 11px;
        opacity: 0.6;
      }

      /* ‚îÄ‚îÄ HUG BUTTON ‚îÄ‚îÄ */
      .hug-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
        padding: 6px 0;
      }

      .hug-label {
        font-size: 10px;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: var(--ink-light);
      }

      .hug-btn-wrap {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .hug-ring {
        position: absolute;
        border-radius: 50%;
        border: 2px solid var(--cinnamon);
        opacity: 0;
        animation: hugRing 3s ease-out infinite;
      }

      .hug-ring:nth-child(1) {
        width: 175px;
        height: 175px;
        animation-delay: 0s;
      }
      .hug-ring:nth-child(2) {
        width: 205px;
        height: 205px;
        animation-delay: 1s;
      }
      .hug-ring:nth-child(3) {
        width: 235px;
        height: 235px;
        animation-delay: 2s;
      }

      @keyframes hugRing {
        0% {
          opacity: 0;
          transform: scale(0.88);
        }
        30% {
          opacity: 0.3;
        }
        100% {
          opacity: 0;
          transform: scale(1.04);
        }
      }

      .hug-btn {
        width: 140px;
        height: 140px;
        border-radius: 50%;
        border: none;
        background: radial-gradient(
          circle at 38% 32%,
          #f5c49a,
          var(--cinnamon) 55%,
          var(--terracotta)
        );
        box-shadow:
          inset 0 -4px 12px rgba(0, 0, 0, 0.15),
          inset 0 4px 10px rgba(255, 255, 255, 0.18),
          0 8px 40px rgba(181, 99, 58, 0.45),
          0 0 0 6px rgba(196, 135, 79, 0.15);
        font-size: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        position: relative;
        z-index: 1;
        transition:
          transform 0.18s cubic-bezier(0.34, 1.56, 0.64, 1),
          box-shadow 0.2s;
      }

      .hug-btn:active {
        transform: scale(0.87);
        box-shadow: 0 4px 20px rgba(181, 99, 58, 0.3);
      }

      .hug-response-text {
        display: none;
        font-family: 'Cormorant Garamond', serif;
        font-size: 17px;
        font-style: italic;
        font-weight: 300;
        color: var(--ink);
        text-align: center;
        line-height: 1.6;
        padding: 16px 20px;
        background: var(--cream-card);
        border-radius: 18px;
        box-shadow:
          0 2px 0 var(--linen),
          0 4px 16px var(--shadow);
        animation: hugPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      .hug-response-text.show {
        display: block;
      }

      @keyframes hugPop {
        from {
          opacity: 0;
          transform: scale(0.85) translateY(8px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      /* ‚îÄ‚îÄ JOURNAL SCREEN ‚îÄ‚îÄ */
      .journal-hero {
        font-family: 'Cormorant Garamond', serif;
        font-size: 26px;
        font-weight: 300;
        color: var(--ink);
        line-height: 1.3;
      }

      .journal-hero em {
        font-style: italic;
        color: var(--terracotta);
      }

      .journal-sub {
        font-size: 12px;
        color: var(--ink-light);
        margin-top: 6px;
        line-height: 1.65;
      }

      .journal-area {
        width: 100%;
        background: var(--cream-card);
        border: 1.5px solid var(--linen);
        border-radius: 20px;
        padding: 20px;
        font-family: 'Nunito', sans-serif;
        font-size: 15px;
        font-weight: 300;
        color: var(--ink);
        line-height: 1.75;
        resize: none;
        min-height: 180px;
        outline: none;
        transition:
          border-color 0.2s,
          box-shadow 0.2s;
        box-shadow: 0 2px 0 var(--linen);
      }

      .journal-area:focus {
        border-color: var(--cinnamon);
        box-shadow: 0 0 0 3px rgba(196, 135, 79, 0.12);
      }

      .journal-area::placeholder {
        color: var(--ink-light);
        font-style: italic;
      }

      .save-btn {
        width: 100%;
        padding: 17px;
        background: linear-gradient(135deg, var(--cinnamon), var(--terracotta));
        border: none;
        border-radius: 18px;
        color: white;
        font-family: 'Nunito', sans-serif;
        font-size: 14px;
        font-weight: 700;
        letter-spacing: 0.5px;
        cursor: pointer;
        box-shadow: 0 6px 24px rgba(181, 99, 58, 0.4);
        transition:
          transform 0.15s,
          box-shadow 0.15s;
      }

      .save-btn:active {
        transform: scale(0.98);
        box-shadow: 0 3px 12px rgba(181, 99, 58, 0.3);
      }

      /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
      .toast {
        position: fixed;
        bottom: 96px;
        left: 50%;
        transform: translateX(-50%) translateY(14px);
        background: var(--bark);
        color: white;
        padding: 12px 24px;
        border-radius: 50px;
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.3px;
        opacity: 0;
        pointer-events: none;
        z-index: 1000;
        transition: all 0.3s;
        white-space: nowrap;
      }

      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }

      /* ‚îÄ‚îÄ ADMIN OVERLAY ‚îÄ‚îÄ */
      .admin-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: var(--parchment);
        z-index: 800;
        overflow-y: auto;
        animation: fadeIn 0.25s;
        padding: env(safe-area-inset-top, 20px) 0
          env(safe-area-inset-bottom, 20px);
      }

      .admin-overlay.show {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .admin-header {
        padding: 24px 24px 16px;
        border-bottom: 1px solid var(--linen);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .admin-title {
        font-family: 'Cormorant Garamond', serif;
        font-size: 22px;
        font-weight: 500;
      }

      .admin-close {
        background: var(--linen);
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        font-size: 16px;
        cursor: pointer;
        color: var(--bark);
      }

      .admin-body {
        padding: 20px;
      }

      .admin-entry {
        background: var(--cream-card);
        border-radius: 18px;
        padding: 20px;
        margin-bottom: 14px;
        box-shadow:
          0 2px 0 var(--linen),
          0 4px 16px var(--shadow);
      }

      .admin-entry-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .admin-mood {
        font-size: 12px;
        color: var(--terracotta);
        font-weight: 700;
      }
      .admin-time {
        font-size: 11px;
        color: var(--ink-light);
      }

      .admin-text {
        font-family: 'Cormorant Garamond', serif;
        font-size: 17px;
        font-style: italic;
        color: var(--ink);
        line-height: 1.65;
      }

      .admin-empty {
        text-align: center;
        color: var(--ink-light);
        font-style: italic;
        padding: 48px 20px;
        font-family: 'Cormorant Garamond', serif;
        font-size: 18px;
        line-height: 1.7;
      }

      /* ‚îÄ‚îÄ PARTICLES ‚îÄ‚îÄ */
      .particle {
        position: fixed;
        pointer-events: none;
        z-index: 9000;
        animation: particleFloat 1.8s ease-out forwards;
        font-size: 20px;
      }

      @keyframes particleFloat {
        0% {
          opacity: 1;
          transform: translate(0, 0) scale(1) rotate(0deg);
        }
        100% {
          opacity: 0;
          transform: translate(var(--tx), var(--ty)) scale(0.2)
            rotate(var(--rot));
        }
      }

      /* ‚îÄ‚îÄ iOS INSTALL HINT ‚îÄ‚îÄ */
      .install-hint {
        margin: -6px 20px 4px;
        background: var(--cream-card);
        border-radius: 18px;
        padding: 16px 18px;
        box-shadow:
          0 2px 0 var(--linen),
          0 4px 14px var(--shadow);
        display: none;
        gap: 12px;
        align-items: flex-start;
        font-size: 12px;
        color: var(--ink-light);
        line-height: 1.6;
      }

      .install-hint.show {
        display: flex;
      }
      .install-hint-icon {
        font-size: 20px;
        flex-shrink: 0;
        margin-top: 1px;
      }
      .install-hint strong {
        color: var(--terracotta);
        display: block;
        margin-bottom: 2px;
        font-size: 13px;
      }

      .dismiss-hint {
        display: none;
        width: 100%;
        padding: 10px;
        background: none;
        border: none;
        color: var(--ink-light);
        font-size: 12px;
        text-align: center;
        cursor: pointer;
        font-family: 'Nunito', sans-serif;
      }

      .dismiss-hint.show {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <!-- HEADER -->
      <div class="header">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
          "
        >
          <div>
            <div class="time-greeting" id="timeGreeting">Good morning</div>
            <div class="header-name">Hey, <em>Sanskriti</em> üå∏</div>
          </div>
          <div
            style="
              text-align: right;
              font-size: 11px;
              color: var(--ink-light);
              line-height: 1.6;
              margin-top: 4px;
            "
            id="dateDisplay"
          ></div>
        </div>
        <div class="header-rule"></div>
      </div>

      <!-- ‚ïê‚ïê‚ïê HOME SCREEN ‚ïê‚ïê‚ïê -->
      <div class="screen active" id="screen-home">
        <!-- Today's affirmation ‚Äî single, no navigation -->
        <div class="card affirmation-card">
          <div class="affirmation-deco">"</div>
          <div class="card-inner">
            <span class="card-tag">Today's affirmation</span>
            <div class="affirmation-text" id="affirmText">Loading‚Ä¶</div>
            <div class="affirmation-from">‚Äî Ankita üå∏</div>
          </div>
        </div>

        <!-- Mood right now -->
        <div>
          <div class="mood-section-title">How are you feeling right now?</div>
          <div class="mood-grid" id="moodGrid"></div>
        </div>

        <!-- Mood response area -->
        <div class="mood-response" id="moodResponse"></div>

        <!-- Hug button -->
        <div class="hug-section">
          <div class="hug-label">need a hug?</div>
          <div class="hug-btn-wrap">
            <div class="hug-ring"></div>
            <div class="hug-ring"></div>
            <div class="hug-ring"></div>
            <button class="hug-btn" onclick="sendHug(event)">ü´Ç</button>
          </div>
          <div class="hug-response-text" id="hugResponse"></div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê JOURNAL SCREEN ‚ïê‚ïê‚ïê -->
      <div class="screen" id="screen-journal">
        <div>
          <div class="journal-hero">Write it out, <em>Sanskriti</em>.</div>
          <div class="journal-sub">
            This goes quietly to Ankita. No pressure ‚Äî even one word is enough.
            She's always reading.
          </div>
        </div>
        <textarea
          class="journal-area"
          id="journalText"
          placeholder="Whatever's on your mind‚Ä¶ I'm here."
          rows="7"
        ></textarea>
        <button class="save-btn" onclick="saveEntry()">
          Send to Ankita üíõ
        </button>
      </div>
    </div>

    <!-- Bottom Nav ‚Äî just two tabs now, clean -->
    <nav class="bottom-nav">
      <button class="nav-btn active" onclick="navTo('home', this)">
        <span class="nav-icon">üè°</span>
        <span class="nav-label">Home</span>
      </button>
      <button class="nav-btn" onclick="navTo('journal', this)">
        <span class="nav-icon">‚úçÔ∏è</span>
        <span class="nav-label">Journal</span>
      </button>
    </nav>

    <!-- iOS install hint -->
    <div class="install-hint" id="installHint">
      <span class="install-hint-icon">üì≤</span>
      <div>
        <strong>Add to your Home Screen</strong>
        Safari ‚Üí Share ‚Üí Add to Home Screen. Then you'll have this like a real
        app üå∏
      </div>
    </div>
    <button class="dismiss-hint" id="dismissHint" onclick="dismissInstall()">
      Got it ‚úì
    </button>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- Admin overlay -->
    <div class="admin-overlay" id="adminOverlay">
      <div class="admin-header">
        <div class="admin-title">üíå Sanskriti's Journal</div>
        <button class="admin-close" onclick="closeAdmin()">‚úï</button>
      </div>
      <div class="admin-body" id="adminBody"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ‚úèÔ∏è  CONTENT ‚Äî Edit this section to update the app
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script>
      const CONFIG = {
        // ‚îÄ‚îÄ SECRET ADMIN LINK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        // Read Sanskriti's journal by visiting:  yoururl.com?admin=YOUR_PASSWORD
        // Change this before you deploy!
        adminPassword: 'ankita0607',

        // ‚îÄ‚îÄ TODAY'S AFFIRMATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        // One per day, rotates automatically. Add as many as you want.
        affirmations: [
          'You showed up today. That is already more than enough.',
          'I am rooting for you from Pune, every single minute.',
          "Getting out of bed? That's already a win. I mean it.",
          "You are not your anxiety. You're the one watching it, and you're doing great.",
          'Rest is not giving up. Rest is how you come back.',
          "I'm so glad you exist. The world genuinely got better when you came into it.",
          'Your feelings are real. They are not forever.',
          'On your hardest days ‚Äî especially those ‚Äî you are still so loved.',
          'One small step today is enough. Even just water counts.',
          "You've gotten through 100% of your hard days. This one too.",
          'I would choose you as my best friend every single time, in every universe.',
          "You are braver than you believe, and more loved than you'll ever know.",
        ],

        // ‚îÄ‚îÄ HUG MESSAGES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        hugMessages: [
          "Sending warmth from Pune. You're not alone, not even for a second. ü´Ç",
          'That button just reached me. I felt it. Consider yourself thoroughly hugged.',
          "Big, soft, ridiculous bear hug. You're stuck with me. üíõ",
          "I'm squeezing you through this screen. Hold on. I mean it.",
          "You pressed it, which means you needed it. I'm here. Always. üå∏",
        ],

        // ‚îÄ‚îÄ MOOD RESPONSES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        // Each mood triggers a specific type of response.
        // Types: "photo"  ‚Üí shows a photo + your caption
        //        "audio"  ‚Üí plays a voice note or sound
        //        "text"   ‚Üí warm text message from you

        moods: [
          {
            emoji: 'üòî',
            label: 'Sad',
            type: 'photo',
            // Replace src with your actual image URL. Leave null until you have one.
            src: null,
            photoEmoji: 'üå∏', // shown if no image yet
            caption:
              "This is us on one of my favourite days. I look at this and I see someone I love so much it's almost annoying.",
            from: 'You are not alone in this. ‚Äî Ankita',
          },
          {
            emoji: 'üò∞',
            label: 'Anxious',
            type: 'audio',
            title: 'Hey. Breathe with me.',
            subtitle: "Ankita's voice, just for this moment",
            // src: URL to your voice note OR a cat purr/sound file
            // Options: record yourself doing a breathing exercise, or use a cat purring sound
            // Free cat purr: "https://www.soundjay.com/animal/sounds/cat-purring-1.mp3"
            src: null,
            duration: '1:30',
          },
          {
            emoji: 'üòû',
            label: 'Down',
            type: 'audio',
            title: 'You are so much more than this moment.',
            subtitle: 'A message from Ankita',
            // Record yourself saying: "Hey, I see you. I know today is hard. But I need you to know..."
            src: null,
            duration: '1:00',
          },
          {
            emoji: 'üò∂',
            label: 'Numb',
            type: 'text',
            emoji2: 'üïØÔ∏è',
            message:
              "Numb days are real. You don't have to feel anything right now. You're allowed to just exist. I'm here in the quiet with you.",
          },
          {
            emoji: 'üòê',
            label: 'Okay-ish',
            type: 'text',
            emoji2: 'üåø',
            message:
              "Okay-ish is actually a pretty good place. Not every day has to be great. I'm proud of you for showing up anyway.",
          },
          {
            emoji: '‚òÄÔ∏è',
            label: 'Good',
            type: 'text',
            emoji2: '‚ú®',
            message:
              "A good day! Write it down somewhere. You earned this one. I'm smiling in Pune because of this. üíõ",
          },
        ],
      };
    </script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     APP LOGIC
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script>
      let activeAudio = null;

      // ‚îÄ‚îÄ STORAGE HELPERS ‚îÄ‚îÄ
      async function storeSet(key, val) {
        try {
          if (window.storage) {
            await window.storage.set(key, JSON.stringify(val));
          } else {
            localStorage.setItem(key, JSON.stringify(val));
          }
        } catch (e) {}
      }

      async function storeGet(key) {
        try {
          if (window.storage) {
            const r = await window.storage.get(key);
            return r ? JSON.parse(r.value) : null;
          } else {
            const v = localStorage.getItem(key);
            return v ? JSON.parse(v) : null;
          }
        } catch (e) {
          return null;
        }
      }

      // ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
      window.addEventListener('DOMContentLoaded', () => {
        setupGreeting();
        setupDate();
        setupAffirmation();
        setupMoods();
        checkAdmin();
        checkInstallHint();
      });

      function setupGreeting() {
        const h = new Date().getHours();
        document.getElementById('timeGreeting').textContent =
          h < 12 ? 'Good morning' : h < 17 ? 'Good afternoon' : 'Good evening';
      }

      function setupDate() {
        const d = new Date();
        const days = [
          'Sunday',
          'Monday',
          'Tuesday',
          'Wednesday',
          'Thursday',
          'Friday',
          'Saturday',
        ];
        const months = [
          'Jan',
          'Feb',
          'Mar',
          'Apr',
          'May',
          'Jun',
          'Jul',
          'Aug',
          'Sep',
          'Oct',
          'Nov',
          'Dec',
        ];
        document.getElementById('dateDisplay').innerHTML =
          `${days[d.getDay()]}<br>${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
      }

      function setupAffirmation() {
        const day = Math.floor(Date.now() / 86400000);
        const idx = day % CONFIG.affirmations.length;
        document.getElementById('affirmText').textContent =
          CONFIG.affirmations[idx];
      }

      // ‚îÄ‚îÄ MOODS ‚îÄ‚îÄ
      function setupMoods() {
        const grid = document.getElementById('moodGrid');
        CONFIG.moods.forEach((mood, i) => {
          const tile = document.createElement('button');
          tile.className = 'mood-tile';
          tile.innerHTML = `<span class="mood-emoji">${mood.emoji}</span><span class="mood-word">${mood.label}</span>`;
          tile.onclick = () => selectMood(i, tile);
          grid.appendChild(tile);
        });
      }

      function selectMood(i, tile) {
        // Deselect all
        document
          .querySelectorAll('.mood-tile')
          .forEach((t) => t.classList.remove('selected'));
        tile.classList.add('selected');

        // Stop any playing audio
        if (activeAudio) {
          activeAudio.pause();
          activeAudio = null;
        }

        // Show response
        renderMoodResponse(CONFIG.moods[i]);
      }

      function renderMoodResponse(mood) {
        const container = document.getElementById('moodResponse');
        container.classList.remove('show');
        container.innerHTML = '';

        let html = '';

        if (mood.type === 'photo') {
          const imgHtml = mood.src
            ? `<img src="${mood.src}" alt="us" />`
            : `<div style="display:flex;align-items:center;justify-content:center;font-size:80px;width:100%;height:100%;">${mood.photoEmoji}</div>`;

          html = `
      <div class="photo-response">
        <div class="photo-response-img">${imgHtml}</div>
        <div class="photo-response-body">
          <div class="photo-response-caption">${mood.caption}</div>
          <div class="photo-response-from">${mood.from}</div>
        </div>
      </div>`;
        } else if (mood.type === 'audio') {
          const bars = [...Array(8)]
            .map(() => {
              const h = 4 + Math.floor(Math.random() * 22);
              return `<div class="wbar" style="height:${h}px"></div>`;
            })
            .join('');

          html = `
      <div class="audio-response" id="audioCard">
        <div class="audio-header">
          <div class="audio-response-label">A message from Ankita</div>
          <div class="audio-response-title">${mood.title}</div>
        </div>
        <div class="audio-player-bar">
          <button class="audio-play-btn" id="audioPlayBtn" onclick="toggleMoodAudio('${mood.src || ''}', '${mood.duration}')">‚ñ∂</button>
          <div class="waveform">${bars}</div>
          <span class="audio-duration">${mood.duration}</span>
        </div>
      </div>`;
        } else if (mood.type === 'text') {
          html = `
      <div class="text-response">
        <div class="text-response-tag">From Ankita, just for you</div>
        <span class="text-response-emoji">${mood.emoji2}</span>
        <div class="text-response-msg">${mood.message}</div>
        <div class="text-response-from">‚Äî Ankita üå∏</div>
      </div>`;
        }

        container.innerHTML = html;

        // Trigger animation
        void container.offsetWidth;
        container.classList.add('show');

        // Scroll into view gently
        setTimeout(
          () =>
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' }),
          100,
        );
      }

      function toggleMoodAudio(src, duration) {
        const card = document.getElementById('audioCard');
        const btn = document.getElementById('audioPlayBtn');

        if (activeAudio) {
          activeAudio.pause();
          card && card.classList.remove('playing');
          btn && (btn.textContent = '‚ñ∂');
          const wasPlaying = activeAudio._playing;
          activeAudio = null;
          if (wasPlaying) return;
        }

        if (!src) {
          // Demo mode: animate for 4s
          card && card.classList.add('playing');
          btn && (btn.textContent = '‚è∏');
          const timer = setTimeout(() => {
            card && card.classList.remove('playing');
            btn && (btn.textContent = '‚ñ∂');
            activeAudio = null;
          }, 4000);
          activeAudio = { pause: () => clearTimeout(timer), _playing: true };
          return;
        }

        const audio = new Audio(src);
        audio._playing = true;
        activeAudio = audio;
        card && card.classList.add('playing');
        btn && (btn.textContent = '‚è∏');
        audio.play();
        audio.onended = () => {
          card && card.classList.remove('playing');
          btn && (btn.textContent = '‚ñ∂');
          activeAudio = null;
        };
      }

      // ‚îÄ‚îÄ HUG ‚îÄ‚îÄ
      function sendHug(e) {
        const btn = e.currentTarget;
        const rect = btn.getBoundingClientRect();
        burstParticles(rect.left + rect.width / 2, rect.top + rect.height / 2);
        if (navigator.vibrate) navigator.vibrate([30, 20, 40, 20, 30]);

        const msg =
          CONFIG.hugMessages[
            Math.floor(Math.random() * CONFIG.hugMessages.length)
          ];
        const el = document.getElementById('hugResponse');
        el.textContent = msg;
        el.classList.remove('show');
        void el.offsetWidth;
        el.classList.add('show');
        clearTimeout(window._hugT);
        window._hugT = setTimeout(() => el.classList.remove('show'), 6000);
      }

      function burstParticles(cx, cy) {
        ['üå∏', 'üíõ', '‚ú®', 'ü´Ç', 'üíó', 'üåø', 'üí´'].forEach((s, i) => {
          const p = document.createElement('div');
          p.className = 'particle';
          const angle = (Math.PI * 2 * i) / 7 + (Math.random() - 0.5);
          const dist = 70 + Math.random() * 110;
          p.textContent = s;
          p.style.cssText = `left:${cx}px;top:${cy}px;font-size:${16 + Math.random() * 16}px;animation-duration:${1.2 + Math.random() * 0.8}s;`;
          p.style.setProperty('--tx', Math.cos(angle) * dist + 'px');
          p.style.setProperty('--ty', Math.sin(angle) * dist + 'px');
          p.style.setProperty('--rot', Math.random() * 360 - 180 + 'deg');
          document.body.appendChild(p);
          setTimeout(() => p.remove(), 2500);
        });
      }

      // ‚îÄ‚îÄ JOURNAL ‚îÄ‚îÄ
      async function saveEntry() {
        const text = document.getElementById('journalText').value.trim();
        if (!text) {
          const el = document.getElementById('journalText');
          el.style.borderColor = '#c45050';
          setTimeout(() => (el.style.borderColor = ''), 1200);
          return;
        }

        const entry = {
          text,
          ts: new Date().toISOString(),
          readable: new Date().toLocaleString('en-IN', {
            timeZone: 'Asia/Kolkata',
            dateStyle: 'medium',
            timeStyle: 'short',
          }),
        };

        let entries = (await storeGet('journal-entries')) || [];
        entries.unshift(entry);
        await storeSet('journal-entries', entries);

        document.getElementById('journalText').value = '';
        showToast('Saved üíõ Ankita will read this');
      }

      function showToast(msg) {
        const t = document.getElementById('toast');
        t.textContent = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 3000);
      }

      // ‚îÄ‚îÄ NAV ‚îÄ‚îÄ
      function navTo(name, btn) {
        document
          .querySelectorAll('.screen')
          .forEach((s) => s.classList.remove('active'));
        document
          .querySelectorAll('.nav-btn')
          .forEach((b) => b.classList.remove('active'));
        document.getElementById(`screen-${name}`).classList.add('active');
        if (btn) btn.classList.add('active');
        if (activeAudio) {
          activeAudio.pause();
          activeAudio = null;
        }
      }

      // ‚îÄ‚îÄ ADMIN ‚îÄ‚îÄ
      function checkAdmin() {
        const p = new URLSearchParams(window.location.search).get('admin');
        if (p === CONFIG.adminPassword) loadAdmin();
      }

      async function loadAdmin() {
        const overlay = document.getElementById('adminOverlay');
        const body = document.getElementById('adminBody');
        overlay.classList.add('show');

        const entries = (await storeGet('journal-entries')) || [];

        if (!entries.length) {
          body.innerHTML = `<div class="admin-empty">She hasn't written anything yet üå∏<br><br>Check back soon ‚Äî she'll get there.</div>`;
          return;
        }

        body.innerHTML = entries
          .map(
            (e) => `
    <div class="admin-entry">
      <div class="admin-entry-meta">
        <span class="admin-mood">‚úçÔ∏è Journal entry</span>
        <span class="admin-time">${e.readable}</span>
      </div>
      <div class="admin-text">${e.text.replace(/</g, '&lt;').replace(/\n/g, '<br>')}</div>
    </div>
  `,
          )
          .join('');
      }

      function closeAdmin() {
        document.getElementById('adminOverlay').classList.remove('show');
        const url = new URL(window.location);
        url.searchParams.delete('admin');
        window.history.replaceState({}, '', url);
      }

      // ‚îÄ‚îÄ iOS INSTALL HINT ‚îÄ‚îÄ
      function checkInstallHint() {
        const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
        const standalone =
          window.navigator.standalone ||
          window.matchMedia('(display-mode: standalone)').matches;
        const dismissed = localStorage.getItem('installDismissed');
        if (isIOS && !standalone && !dismissed) {
          document.getElementById('installHint').classList.add('show');
          document.getElementById('dismissHint').classList.add('show');
        }
      }

      function dismissInstall() {
        localStorage.setItem('installDismissed', '1');
        document.getElementById('installHint').classList.remove('show');
        document.getElementById('dismissHint').classList.remove('show');
      }
    </script>
  </body>
</html>
